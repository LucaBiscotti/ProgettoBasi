{% extends 'base.html' %}

{% block name %}
    <a href="{{url_for('routes.index')}}">
        <i class="gg-arrow-left-o"></i>
    </a>
{% endblock %}

{% block content %}
    <h1 style="width: 100%">{% block title %} Crea nuovo esame {% endblock %}</h1>
    <form method="post" onsubmit="return validateForm()">

        <p>
            <label for="codice">Codice Insegnamento</label>
            <select type="text" name="inse" id="inse">
                <option value="" disabled selected>Seleziona esame</option>
                {% for ins in insegnamenti %}
                    <option value="{{ ins.codice }}"> {{ ins.codice }} </option>
                {% endfor %}
            </select>
        </p>
        <p>
            <label for="codice">Codice Corso</label>
            <select type="text" name="codice" id="codice">
                <option value="" disabled selected>Seleziona codice</option>
            </select>
          </p>
        <p>
            <label for="A.A">Anno Accademico</label>
            <input type="number" name="anno"
                   placeholder="2022">
            </input>
        </p>
        <p>
            <label for="CFU">CFU</label>
            <input type="number" name="cfu"
                   placeholder="12">
            </input>
        </p>
        <p>
            <label for="data_i">Data inizio</label>
            <input type="date" name="data_i"
                   placeholder="">
            </input>
        </p>
        <p>
            <label for="data_f">Data Fine</label>
            <input type="date" name="data_f"
                   placeholder="">
            </input>
        </p>

        <p>
            <button type="submit">Crea</button>
            <button type="reset">Reset</button>
            <button type="button">
                <a href="{{url_for('routes.index')}}">Chiudi</a>
            </button>
        </p>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.20/dist/sweetalert2.min.js"></script>

    <script>
        function validateForm() {
            var insegnamento = document.getElementById("inse").value;
            var codice = document.getElementById("codice").value;
            var anno = document.getElementsByName("anno")[0].value;
            var cfu = document.getElementsByName("cfu")[0].value;
            var data_i = document.getElementsByName("data_i")[0].value;
            var data_f = document.getElementsByName("data_f")[0].value;
    
            if (insegnamento === "" || codice === "" || anno === "" || cfu === "" || data_i === "" || data_f === "") {
                Swal.fire({
                    icon: 'error',
                    title: 'Manca qualcosa',
                    text: 'Si prega di compilare tutti i campi.',
                });
                return false;
            }
        }
    </script>
{% endblock %}